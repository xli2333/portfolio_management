# ğŸš€æ™ºèƒ½è¯åˆ¸æŠ•èµ„ç»„åˆç®¡ç†ç³»ç»Ÿ

> **AI é©±åŠ¨çš„æ™ºèƒ½æŠ•é¡¾å¹³å°**
> ç‰ˆæœ¬: 2.1.0 | æ¶æ„: React + Flask + Supabase | AI: Google Gemini (Deep Research)

ä¸€ä¸ªé›†æˆæŠ€æœ¯åˆ†æã€AI æŠ•é¡¾ã€çŸ¥è¯†åº“ç®¡ç†å’Œæ·±åº¦ç ”æŠ¥ç”Ÿæˆçš„ç°ä»£åŒ–æŠ•èµ„ç»„åˆç®¡ç†å¹³å°ã€‚æ”¯æŒå¤šç”¨æˆ·æ³¨å†Œã€æ•°æ®éš”ç¦»ã€äº‘ç«¯éƒ¨ç½²ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“Š æŠ•èµ„ç»„åˆç®¡ç†
- **å®æ—¶è¡Œæƒ…ç›‘æ§**ï¼šè‡ªåŠ¨è·å–ç¾è‚¡ã€Aè‚¡å®æ—¶æ•°æ®
- **æŒä»“ç®¡ç†**ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤æŒä»“ï¼Œè‡ªåŠ¨è®¡ç®—ç›ˆäº
- **æŠ€æœ¯æŒ‡æ ‡åˆ†æ**ï¼šMA, MACD, RSI, KDJ, SuperTrend, Ichimoku Cloud ç­‰
- **äº¤æ˜“ä¿¡å·è¯†åˆ«**ï¼šé‡‘å‰/æ­»å‰ã€è¶‹åŠ¿åè½¬ã€è¶…ä¹°è¶…å–é¢„è­¦
- **å¯è§†åŒ–å›¾è¡¨**ï¼šä¸“ä¸šçº§ K çº¿å›¾ï¼Œæ”¯æŒå¤šæŒ‡æ ‡å åŠ 

### ğŸ¤– AI æ™ºèƒ½æŠ•é¡¾
- **Google Gemini é©±åŠ¨**ï¼šåŸºäºGemini 2.5 flash/pro æ¨¡å‹
- **æ™ºèƒ½å¯¹è¯**ï¼šé’ˆå¯¹æŒä»“è‚¡ç¥¨è¿›è¡Œæ™ºèƒ½é—®ç­”
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šè‡ªåŠ¨åŠ è½½ç”¨æˆ·æŒä»“å’Œå†å²æ•°æ®
- **ä¸“ä¸šåˆ†æ**ï¼šæä¾›æŠ€æœ¯é¢ã€åŸºæœ¬é¢ç»¼åˆå»ºè®®
- **å›¾åƒè¯†åˆ«**ï¼šè¯†åˆ«è‚¡ç¥¨èµ°åŠ¿å›¾åƒï¼Œå¹¶æä¾›å½“å‰ä»·æ ¼ä¸‹çš„ç»¼åˆå»ºè®®

### ğŸ“š çŸ¥è¯†åº“ç®¡ç†
- **æ–‡æ¡£ä¸Šä¼ **ï¼šæ”¯æŒ PDF ç ”æŠ¥ä¸Šä¼ å’Œç®¡ç†
- **å¯¹è¯å¯¼å‡º**ï¼šæ”¯æŒ å¤šè½®å¯¹è¯ä¸­é€‰å®šå¯¹è¯çš„å¯¼å‡ºä¸é•¿ä¹…ä¿å­˜
- **æ™ºèƒ½æ£€ç´¢**ï¼šåŸºäºé€‰å®šæ–‡æ¡£å†…å®¹çš„ AI é—®ç­”
- **å¤šè‚¡ç¥¨æ”¯æŒ**ï¼šæŒ‰è‚¡ç¥¨ä»£ç åˆ†ç±»ç®¡ç†æ–‡æ¡£
- **äº‘ç«¯å­˜å‚¨**ï¼šSupabase Storage / Render Disk å®‰å…¨å­˜å‚¨

### âš¡ é¡¶çº§æ·±åº¦æŠ¥å‘Š (Ultra Deep Report)
- **Deep Research API**ï¼šé›†æˆ Google å®˜æ–¹ Deep Research èƒ½åŠ›
- **ä¸‰ç§æ¨¡å¼**ï¼šä¸ªè‚¡æ·±åº¦åˆ†æ (STOCK)ã€å®è§‚ç»æµåˆ†æ (MACRO)ã€é‡åŒ–ç­–ç•¥è®¾è®¡ (STRATEGY)
- **å¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿ**ï¼šåå°è‡ªåŠ¨æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼Œå®Œç¾é€‚é…äº‘ç«¯ç¯å¢ƒï¼ˆè§£å†³ Serverless è¶…æ—¶é—®é¢˜ï¼‰
- **ä¸‡å­—é•¿æ–‡**ï¼šç”Ÿæˆ 5000+ å­—çš„ä¸“ä¸šçº§ç ”æŠ¥ï¼ŒåŒ…å«å¤§é‡æ•°æ®å¼•ç”¨å’Œå‚è€ƒæ–‡çŒ®

### ğŸ‘¥ å¤šç”¨æˆ·ç³»ç»Ÿ
- **é‚®ç®±æ³¨å†Œ**ï¼šSupabase è®¤è¯ç³»ç»Ÿ
- **æ•°æ®éš”ç¦»**ï¼šRLS (Row Level Security) ç¡®ä¿æ•°æ®å®‰å…¨
- **ä¼šè¯ç®¡ç†**ï¼šè‡ªåŠ¨ç™»å½•çŠ¶æ€ä¿æŒ
- **å®‰å…¨ç™»å‡º**ï¼šå®Œæ•´çš„è®¤è¯ç”Ÿå‘½å‘¨æœŸç®¡ç†

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯ (Backend)
- **æ¡†æ¶**ï¼šFlask 3.0+ (æ”¯æŒå¼‚æ­¥ä»»åŠ¡)
- **è¯­è¨€**ï¼šPython 3.12+
- **æ•°æ®åº“**ï¼šSupabase PostgreSQL
- **AI æ¨¡å‹**ï¼šGoogle Gemini 2.0 Flash / Deep Research
- **æ•°æ®æº**ï¼šAKShare (è´¢ç»æ•°æ®)ã€yfinance (ç¾è‚¡æ•°æ®)
- **æŠ€æœ¯åˆ†æ**ï¼šTA-Lib, Pandas, NumPy
- **PDF ç”Ÿæˆ**ï¼šReportLab, PyPDF2
- **ä»»åŠ¡ç®¡ç†**ï¼šæœ¬åœ°æŒä¹…åŒ– JSON å­˜å‚¨ (Task Manager)

### å‰ç«¯ (Frontend)
- **æ¡†æ¶**ï¼šReact 18 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite 5.0+
- **UI æ¡†æ¶**ï¼šTailwind CSS
- **å›¾è¡¨åº“**ï¼šLightweight Charts, Recharts
- **å›¾æ ‡**ï¼šLucide React
- **è®¤è¯**ï¼šSupabase Auth
- **äº¤äº’**ï¼šå®æ—¶è½®è¯¢ (Polling) ä»»åŠ¡çŠ¶æ€

### äº‘ç«¯éƒ¨ç½²
- **å‰ç«¯æ‰˜ç®¡**ï¼šVercel
- **åç«¯æœåŠ¡**ï¼šRender (Docker + Persistent Disk)
- **æ•°æ®åº“**ï¼šSupabase (PostgreSQL)
- **æ–‡ä»¶å­˜å‚¨**ï¼šSupabase Storage / Render Persistent Disk

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Node.js 18.0+
- Git

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/xli2333/portfolio_management.git
cd portfolio_management
```

#### 2. åç«¯é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
# Google Gemini API (å¿…é¡»)
GEMINI_API_KEY=your_gemini_api_key_here

# Supabase é…ç½® (ç”Ÿäº§ç¯å¢ƒå¿…é¡»)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_public_key_here

# æœåŠ¡å™¨ç«¯å£ (å¯é€‰ï¼Œé»˜è®¤ 5000)
PORT=5000
```

å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼š
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
.\venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åç«¯
python web_app.py
```

åç«¯å°†è¿è¡Œåœ¨ `http://localhost:5000`

#### 3. å‰ç«¯é…ç½®

åˆ›å»º `client/.env` æ–‡ä»¶ï¼š
```bash
VITE_API_URL=http://localhost:5000
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_public_key_here
```

å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼š
```bash
cd client
npm install
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ `http://localhost:5173`

---

## â˜ï¸ äº‘ç«¯éƒ¨ç½²

### å¿«é€Ÿéƒ¨ç½²æ‘˜è¦

#### Supabase æ•°æ®åº“è®¾ç½®
1. åˆ›å»º Supabase é¡¹ç›®
2. åœ¨ SQL Editor ä¸­æ‰§è¡Œ `supabase_init.sql`
3. å¤åˆ¶ Project URL å’Œ anon public key

#### Render åç«¯éƒ¨ç½²
1. è¿æ¥ GitHub ä»“åº“
2. é€‰æ‹© Docker è¿è¡Œæ—¶
3. å¼€å¯ Persistent Disk (æŒ‚è½½è·¯å¾„ `/app/knowledge_base`) ä»¥ä¿å­˜ä»»åŠ¡çŠ¶æ€å’Œ PDF æ–‡ä»¶
4. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `SUPABASE_URL`
   - `SUPABASE_KEY`
   - `GEMINI_API_KEY`
   - `PORT=10000`

#### Vercel å‰ç«¯éƒ¨ç½²
1. å¯¼å…¥ GitHub ä»“åº“
2. è®¾ç½® Root Directory ä¸º `client`
3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `VITE_API_URL` (Render åç«¯ URL)
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
portfolio_management/
â”œâ”€â”€ analyst_agent.py           # AI åˆ†æå¸ˆä»£ç†
â”œâ”€â”€ deep_research_agent.py     # Deep Research ä»£ç† (New)
â”œâ”€â”€ task_manager.py            # å¼‚æ­¥ä»»åŠ¡ç®¡ç†å™¨ (New)
â”œâ”€â”€ analyzer.py                # æŠ€æœ¯åˆ†æå¼•æ“
â”œâ”€â”€ advanced_indicators.py     # é«˜çº§æŠ€æœ¯æŒ‡æ ‡
â”œâ”€â”€ data_fetcher.py           # æ•°æ®è·å–æœåŠ¡
â”œâ”€â”€ portfolio_service.py      # æŠ•èµ„ç»„åˆæœåŠ¡
â”œâ”€â”€ knowledge_service.py      # çŸ¥è¯†åº“æœåŠ¡
â”œâ”€â”€ report_generator.py       # æ·±åº¦ç ”æŠ¥ç”Ÿæˆå™¨
â”œâ”€â”€ web_app.py               # Flask ä¸»åº”ç”¨
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ Dockerfile              # Docker é…ç½®
â”œâ”€â”€ client/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ StockKnowledgeBase.tsx  # çŸ¥è¯†åº“ (Updated)
â”‚   â”‚   â”‚   â””â”€â”€ ...
â””â”€â”€ knowledge_base/         # çŸ¥è¯†åº“æ–‡æ¡£å­˜å‚¨
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.1.0 (2025-12-12)
- âœ¨ **é‡ç£…æ›´æ–°**ï¼šæ–°å¢ "é¡¶çº§æ·±åº¦æŠ¥å‘Š" (Ultra Deep Report) åŠŸèƒ½
- âš¡ **æ¶æ„å‡çº§**ï¼šåç«¯å¼•å…¥å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œè§£å†³äº‘ç«¯éƒ¨ç½²è¶…æ—¶é—®é¢˜
- ğŸ”„ **äº¤äº’ä¼˜åŒ–**ï¼šå‰ç«¯æ”¯æŒä»»åŠ¡çŠ¶æ€å®æ—¶è½®è¯¢
- ğŸ“ **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–°éƒ¨ç½²æ–‡æ¡£é€‚é… Render Persistent Disk

### v2.0.0 (2025-12-10)
- âœ¨ æ–°å¢ AI æ™ºèƒ½æŠ•é¡¾åŠŸèƒ½ (Google Gemini)
- âœ¨ æ–°å¢çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ
- âœ¨ æ–°å¢æ·±åº¦ç ”æŠ¥ç”Ÿæˆå™¨
- âœ¨ æ–°å¢å¤šç”¨æˆ·è®¤è¯ç³»ç»Ÿ (Supabase Auth)
- âœ¨ æ–°å¢æ•°æ®éš”ç¦»å’Œ RLS å®‰å…¨ç­–ç•¥

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**